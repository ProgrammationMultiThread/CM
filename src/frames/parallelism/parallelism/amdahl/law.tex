% SPDX-License-Identifier: CC-BY-SA-4.0
% Author: Matthieu Perrin
% Part: 
% Section: 
% Sub-section: 
% Frame: 

\begingroup

\begin{frame}{La loi d'Amdahl}

  \onBlock[top=-4mm]{Définition -- Accélération}{
    \begin{description}
    \item[$p$: ] Proportion du temps d'exécution parallélisable 
    \item[$T(n)$: ] Temps nécessaire à $n$ threads
    \item[$S(n)$: ] Accélération (Speedup) pour $n$ threads \alert{$S(n) = \frac{T(1)}{T(n)}$}
    \end{description}
  }

  \on<2>[x=-20mm, y=-13mm]{
    \begin{tikzpicture}[x=5mm, y=2.3mm]
      \foreach \x in {0, ..., 13} {
        \draw[black!20] (\x,0) -- (\x,20);
        \draw[below]    (\x,0) node{\tiny$2^{\x}$};
      }
      \foreach \y in {0,1,3,5,6,...,9,11,12,..., 19} {
        \draw[thin,black!20] (0,\y) -- (13,\y);
        \draw[left]     (0,\y) node{\tiny\y};
      }

      \draw[structure!60]    (0,20) -- (13,20);
      \draw[example!60]      (0,10) -- (13,10);
      \draw[alert!60]        (0, 4) -- (13, 4);
      \draw[structure!60]    (0, 2) -- (13, 2);

      \draw[left, structure] (0,20) node{\tiny 20};
      \draw[left, example  ] (0,10) node{\tiny 10};
      \draw[left, alert    ] (0, 4) node{\tiny  4};
      \draw[left, structure] (0, 2) node{\tiny  2};

      \draw[->] (0,0) -- (0,20.9) node[above]{\small $S(n)$};
      \draw[->] (0,0) -- (13.5,0) node[right]{\small $n$};
      
      \draw[domain=0:13, samples=14, thick, structure] plot (\x,{1/(1-0.95+0.95/(2^\x))});
      \draw[domain=0:13, samples=14, thick, example]   plot (\x,{1/(1-0.90+0.90/(2^\x))});
      \draw[domain=0:13, samples=14, thick, alert]     plot (\x,{1/(1-0.75+0.75/(2^\x))});
      \draw[domain=0:13, samples=14, thick, structure] plot (\x,{1/(1-0.50+0.50/(2^\x))});

      \node[below left, structure] at (13,20) {\footnotesize $p=95\%$};
      \node[above left, example]   at (13,10) {\footnotesize $p=90\%$};
      \node[above left, alert]     at (13, 4) {\footnotesize $p=75\%$};
      \node[below left, structure] at (13, 2) {\footnotesize $p=50\%$};
    \end{tikzpicture}
  }
  
  \on<2>[y=-12mm, right=.33\textwidth]{
    $$
    \begin{array}{rcl}
      \displaystyle S(n)                       & = & \displaystyle \frac{1}{1-p + \frac{p}{n}}
      \\[5mm]
      \displaystyle S(n)                       & < & \displaystyle \frac{1}{1-p}
      \\[5mm]
      \displaystyle \lim_{n\rightarrow \infty} S(n) & = & \displaystyle \frac{1}{1-p}
    \end{array}
    $$
  }
  
\end{frame}

\endgroup
\endinput
