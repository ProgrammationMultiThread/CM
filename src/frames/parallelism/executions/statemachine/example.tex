% SPDX-License-Identifier: CC-BY-SA-4.0
% Author: Matthieu Perrin
% Part: 
% Section: 
% Sub-section: 
% Frame: 

\begingroup

\begin{frame}{Machine à états de l'exemple}
  \begin{center}
    \begin{tikzpicture}

      \draw[fill=black!10, ultra thin, rounded corners] (-3,6)    +(-.5,-.15) rectangle +(1.1,.15);
      \draw[structure]    (-3,6)   node[left]{\tiny$main$} node {\tiny:} node[right]{\tiny$main()$};

      \draw[fill=black!10, ultra thin, rounded corners] (0,6)    +(-.5,-.35) rectangle +(1.1,.35);
      \draw[structure]    (0,6.2)  node[left]{\tiny$main$} node {\tiny:} node[right]{\tiny$t1.start()$};
      \draw               (0,6)    node[left]{\tiny$t1$} node {\tiny:} node[right]{\tiny\textsc{new}};
      \draw               (0,5.8)  node[left]{\tiny$t2$} node {\tiny:} node[right]{\tiny\textsc{new}};
      
      \draw[fill=black!10, ultra thin, rounded corners] (0,5)    +(-.5,-.35) rectangle +(1.1,.35);
      \draw[structure]    (0,5.2)  node[left]{\tiny$main$} node {\tiny:} node[right]{\tiny$t2.start()$};
      \draw[alertColor]        (0,5)    node[left]{\tiny$t1$} node {\tiny:} node[right]{\tiny$print(hello)$};
      \draw               (0,4.8)  node[left]{\tiny$t2$} node {\tiny:} node[right]{\tiny\textsc{new}};
      
      \draw[fill=black!10, ultra thin, rounded corners] (3,4.5)    +(-.5,-.35) rectangle +(1.1,.35);
      \draw[structure]    (3,4.7)  node[left]{\tiny$main$} node {\tiny:} node[right]{\tiny$t2.start()$};
      \draw[alertColor]        (3,4.5)  node[left]{\tiny$t1$} node {\tiny:} node[right]{\tiny$print(world)$};
      \draw               (3,4.3)  node[left]{\tiny$t2$} node {\tiny:} node[right]{\tiny\textsc{new}};

      \draw[fill=black!10, ultra thin, rounded corners] (6,4.0)    +(-.5,-.35) rectangle +(1.1,.35);
      \draw[structure]    (6,4.2)  node[left]{\tiny$main$} node {\tiny:} node[right]{\tiny$t2.start()$};
      \draw               (6,4.0)  node[left]{\tiny$t1$} node {\tiny:} node[right]{\tiny\textsc{terminated}};
      \draw               (6,3.8)  node[left]{\tiny$t2$} node {\tiny:} node[right]{\tiny\textsc{new}};

      \draw[fill=black!10, ultra thin, rounded corners] (0,4)    +(-.5,-.35) rectangle +(1.1,.35);
      \draw               (0,4.2)  node[left]{\tiny$main$} node {\tiny:} node[right]{\tiny$t1.join()$};
      \draw[alertColor]        (0,4)    node[left]{\tiny$t1$} node {\tiny:} node[right]{\tiny$print(hello)$};
      \draw[exampleColor] (0,3.8)  node[left]{\tiny$t2$} node {\tiny:} node[right]{\tiny$print(multi.)$};

      \draw[fill=black!10, ultra thin, rounded corners] (-3,3.5)    +(-.5,-.35) rectangle +(1.1,.35);
      \draw               (-3,3.7) node[left]{\tiny$main$} node {\tiny:} node[right]{\tiny$t1.join()$};
      \draw[alertColor]        (-3,3.5) node[left]{\tiny$t1$} node {\tiny:} node[right]{\tiny$print(hello)$};
      \draw               (-3,3.3) node[left]{\tiny$t2$} node {\tiny:} node[right]{\tiny\textsc{terminated}};

      \draw[fill=black!10, ultra thin, rounded corners] (3,3.5)    +(-.5,-.35) rectangle +(1.1,.35);
      \draw               (3,3.7)  node[left]{\tiny$main$} node {\tiny:} node[right]{\tiny$t1.join()$};
      \draw[alertColor]        (3,3.5)  node[left]{\tiny$t1$} node {\tiny:} node[right]{\tiny$print(world)$};
      \draw[exampleColor] (3,3.3)  node[left]{\tiny$t2$} node {\tiny:} node[right]{\tiny$print(multi.)$};

      \draw[fill=black!10, ultra thin, rounded corners] (6,3.0)    +(-.5,-.35) rectangle +(1.1,.35);
      \draw[structure]    (6,3.2)  node[left]{\tiny$main$} node {\tiny:} node[right]{\tiny$t1.join()$};
      \draw               (6,3.0)  node[left]{\tiny$t1$} node {\tiny:} node[right]{\tiny\textsc{terminated}};
      \draw[exampleColor] (6,2.8)  node[left]{\tiny$t2$} node {\tiny:} node[right]{\tiny$print(multi.)$};

      \draw[fill=black!10, ultra thin, rounded corners] (0,3)    +(-.5,-.35) rectangle +(1.1,.35);
      \draw               (0,3.2)  node[left]{\tiny$main$} node {\tiny:} node[right]{\tiny$t1.join()$};
      \draw[alertColor]        (0,3  )  node[left]{\tiny$t1$} node {\tiny:} node[right]{\tiny\tiny$print(world)$};
      \draw               (0,2.8)  node[left]{\tiny$t2$} node {\tiny:} node[right]{\tiny\textsc{terminated}};

      \draw[fill=black!10, ultra thin, rounded corners] (3,2.5)    +(-.5,-.35) rectangle +(1.1,.35);
      \draw[structure]    (3,2.7)  node[left]{\tiny$main$} node {\tiny:} node[right]{\tiny$t1.join()$};
      \draw               (3,2.5)  node[left]{\tiny$t1$} node {\tiny:} node[right]{\tiny\textsc{terminated}};
      \draw               (3,2.3)  node[left]{\tiny$t2$} node {\tiny:} node[right]{\tiny\textsc{terminated}};
      
      \draw[fill=black!10, ultra thin, rounded corners] (6,2.0)    +(-.5,-.35) rectangle +(1.1,.35);
      \draw               (6,2.2)  node[left]{\tiny$main$} node {\tiny:} node[right]{\tiny$t2.join()$};
      \draw               (6,2.0)  node[left]{\tiny$t1$} node {\tiny:} node[right]{\tiny\textsc{terminated}};
      \draw[exampleColor] (6,1.8)  node[left]{\tiny$t2$} node {\tiny:} node[right]{\tiny$print(multi.)$};

      \draw[fill=black!10, ultra thin, rounded corners] (3,1.5)    +(-.5,-.35) rectangle +(1.1,.35);
      \draw[structure]    (3,1.7)  node[left]{\tiny$main$} node {\tiny:} node[right]{\tiny$t2.join()$};
      \draw               (3,1.5)  node[left]{\tiny$t1$} node {\tiny:} node[right]{\tiny\textsc{terminated}};
      \draw               (3,1.3)  node[left]{\tiny$t2$} node {\tiny:} node[right]{\tiny\textsc{terminated}};

      \draw[fill=black!10, ultra thin, rounded corners] (3,0.5)    +(-.5,-.35) rectangle +(1.1,.35);
      \draw[structure]    (3,0.7)  node[left]{\tiny$main$} node {\tiny:} node[right]{\tiny$print(!)$};
      \draw               (3,0.5)  node[left]{\tiny$t1$} node {\tiny:} node[right]{\tiny\textsc{terminated}};
      \draw               (3,0.3)  node[left]{\tiny$t2$} node {\tiny:} node[right]{\tiny\textsc{terminated}};

      \draw[fill=black!10, ultra thin, rounded corners] (6,0.5)    +(-.55,-.2) rectangle +(1.15,.2);
      \draw[fill=black!10, ultra thin, rounded corners] (6,0.5)    +(-.5,-.15) rectangle +(1.1,.15);
      \draw               (6,0.5)  node[left]{\tiny$main$} node {\tiny:} node[right]{\tiny\textsc{terminated}};


      \draw[-latex]    (-2.7,6.5) -- (-2.7,6.15) ;
      \draw[structure, -latex, densely dotted]    (-1.9,6) -- (-.5,6) ;
      \draw[structure, -latex]    (0.3,5.65) -- (0.3,5.35) ;
      \draw[structure, -latex]    (0.3,4.65) -- (0.3,4.35) ;
      \draw[structure, -latex]    (3.3,4.15) -- (3.3,3.85) ;
      \draw[structure, -latex]    (3.3,2.15) -- (3.3,1.85) ;
      \draw[structure, -latex]    (3.3,1.15) -- (3.3,0.85) ;
      \draw[structure, -latex]    (6.3,3.65) -- (6.3,3.35) ;
      \draw[structure, -latex]    (6.3,2.65) -- (6.3,2.35) ;
      \draw[structure, -latex]    (4.1,.5) -- (5.45,.5) ;  \draw[structure] (4.75,.5) node[above]{\scriptsize!} ;

      \draw[exampleColor, -latex] (2.5,3.4) -- (1.1,3.1) ;  \draw[exampleColor] (1.6,3.25) node[above]{\scriptsize multithreaded} ;
      \draw[exampleColor, -latex] (-.5,3.9) -- (-1.9,3.6);  \draw[exampleColor] (-1.4,3.75) node[above]{\scriptsize multithreaded} ;
      \draw[exampleColor, -latex] (5.5,2.9) -- (4.1,2.6) ;  \draw[exampleColor] (4.6,2.75) node[above]{\scriptsize multithreaded} ;
      \draw[exampleColor, -latex] (5.5,1.9) -- (4.1,1.6) ;  \draw[exampleColor] (4.6,1.75) node[above]{\scriptsize multithreaded} ;

      \draw[alertColor, -latex] (-1.9,3.4) -- (-.5,3.1);  \draw[alertColor] (-1.2,3.25) node[above]{\scriptsize hello} ;
      \draw[alertColor, -latex] (1.1,4.9) -- (2.5,4.6) ;  \draw[alertColor] (1.8,4.75) node[above]{\scriptsize hello} ;
      \draw[alertColor, -latex] (1.1,3.9) -- (2.5,3.6) ;  \draw[alertColor] (1.8,3.75) node[above]{\scriptsize hello} ;
      \draw[alertColor, -latex] (1.1,2.9) -- (2.5,2.6) ;  \draw[alertColor] (1.8,2.75) node[above]{\scriptsize world} ;
      \draw[alertColor, -latex] (4.1,4.4) -- (5.5,4.1) ;  \draw[alertColor] (4.8,4.25) node[above]{\scriptsize world} ;
      \draw[alertColor, -latex] (4.1,3.4) -- (5.5,3.1) ;  \draw[alertColor] (4.8,3.25) node[above]{\scriptsize world} ;


    \end{tikzpicture}
  \end{center}
\end{frame}

\endgroup
\endinput
