% SPDX-License-Identifier: CC-BY-SA-4.0
% Author: Matthieu Perrin
% Part: 
% Section: 
% Sub-section: 
% Frame: 

\begingroup

\begin{frame}[fragile]{Exemple}
  \vspace{-3mm}
  \begin{center}
    \scalebox{.6}{
      \begin{tikzpicture}
        \draw[white] (-2.5,0.5) rectangle (15,4);

        \draw[structure ,     -latex] (-1,3) node[left]{$T_1$} -- (15,3);
        \draw[exampleColor,   -latex] (-1,2) node[left]{$T_2$} -- (15,2);
        \draw<7> [alertColor, -latex] (-1,1) node[left]{$result$} +(.2,.15) node{$0$} +(0,0) -- (15,1);
        \draw<2-6>[alertColor, -latex] (-1,1) node[left]{$counter$} +(.2,.15) node{$0$} +(0,0) -- (15,1);

        \draw[exampleColor, fill=exampleColor!20, rounded corners] (1 , 1.6) rectangle (5 , 2.4);
        \draw[exampleColor, fill=exampleColor!20, rounded corners] (6 , 1.6) rectangle (13, 2.4);
        \draw[structure, fill=structure!20, rounded corners] (2 , 2.6) rectangle (10, 3.4);
        \draw[structure, fill=structure!20, rounded corners] (11, 2.6) rectangle (14, 3.4);

        \draw<7>[alertColor, fill=alertColor!20, rounded corners] (1.1 , 1.7) rectangle (2.9 , 2.3);
        \draw<7>[alertColor, fill=alertColor!20, rounded corners] (3.1 , 1.7) rectangle (4.9 , 2.3);
        \draw<7>[alertColor, fill=alertColor!20, rounded corners] (6.1 , 1.7) rectangle (12.9, 2.3);
        \draw<7>[alertColor, fill=alertColor!20, rounded corners] (2.1 , 2.7) rectangle (5.4, 3.3);
        \draw<7>[alertColor, fill=alertColor!20, rounded corners] (5.6 , 2.7) rectangle (9.9, 3.3);
        \draw<7>[alertColor, fill=alertColor!20, rounded corners] (11.1, 2.7) rectangle (13.9, 3.3);

        \draw<7>[alertColor] (2   , 2) node{$get()$}; 
        \draw<7>[alertColor] (4   , 2) node{$put(1)$}; 
        \draw<7>[alertColor] (9.5 , 2) node{$get()$}; 
        \draw<7>[alertColor] (4.25, 3) node{$get()$}; 
        \draw<7>[alertColor] (7.75, 3) node{$put(1)$}; 
        \draw<7>[alertColor] (12.5, 3) node{$get()$}; 

        \draw<7>[alertColor, thick, densely dotted] (2   , 1.7) -- (2   , 1) node{$\bullet$} ++(0,.15) node[right]{\footnotesize$0$}; 
        \draw<7>[alertColor, thick, densely dotted] (4   , 1.7) -- (4   , 1) node{$\bullet$} ++(0,.15) node[right]{\footnotesize$1$}; 
        \draw<7>[alertColor, thick, densely dotted] (9.5 , 1.7) -- (9.5 , 1) node{$\bullet$} ++(0,.15) node[right]{\footnotesize$1$}; 
        \draw<7>[alertColor, thick, densely dotted] (3, 2.7)    -- (3, 1)    node{$\bullet$} ++(0,.15) node[right]{\footnotesize$0$}; 
        \draw<7>[alertColor, thick, densely dotted] (7.75, 2.7) -- (7.75, 1) node{$\bullet$} ++(0,.15) node[right]{\footnotesize$1$}; 
        \draw<7>[alertColor, thick, densely dotted] (12.5, 2.7) -- (12.5, 1) node{$\bullet$} ++(0,.15) node[right]{\footnotesize$1$}; 

        \draw<7>[structure] (6,3.65) node{$increment()$ };
        \draw<7>[structure] (12.5,3.65) node{$get()$};
        \draw<7>[exampleColor] (1,1.35) node{$increment()$ };
        \draw<7>[exampleColor] (11,1.35) node{$get()$};

        \draw<-6>[structure] (6,3) node{$increment()$ };
        \draw<1>[structure] (12.5,3) node{$get()$};
        \draw<2>[structure] (12.5,3) node{$get()$ retourne $2$};
        \draw<3>[structure] (12.5,3) node{$get()$ retourne $2$};
        \draw<4>[structure] (12.5,3) node{$get()$ retourne $2$};
        \draw<5>[structure] (12.5,3) node{$get()$ retourne $2$};
        \draw<6>[structure] (12.5,3) node{$get()$ retourne $2$};
        \draw<-6>[exampleColor] (3,2) node{$increment()$ };
        \draw<1>[exampleColor] (9.5,2) node{$get()$};
        \draw<2>[exampleColor] (9.5,2) node{$get()$ retourne $2$};
        \draw<3>[exampleColor] (9.5,2) node{$get()$ retourne $2$};
        \draw<4>[exampleColor] (9.5,2) node{$get()$ retourne $2$};
        \draw<5>[exampleColor] (9.5,2) node{$get()$ retourne $2$};
        \draw<6>[exampleColor] (9.5,2) node{$get()$ retourne $1$};

        \draw<2>[densely dotted, thick, structure]    (4.0  ,2.6) node{$\bullet$} -- (4.0  ,1)    node{$\bullet$};
        \draw<2>[densely dotted, thick, structure]    (11.5 ,2.6) node{$\bullet$} -- (11.5 ,1) node{$\bullet$};
        \draw<2>[densely dotted, thick, exampleColor] (4.5  ,1.6) node{$\bullet$} -- (4.5  ,1)    node{$\bullet$};
        \draw<2>[densely dotted, thick, exampleColor] (12.5 ,1.6) node{$\bullet$} -- (12.5 ,1)  node{$\bullet$};

        \draw<3>[densely dotted, thick, structure]    (4.0  ,2.6) node{$\bullet$} -- (4.0  ,1)    node{$\bullet$};
        \draw<3>[densely dotted, thick, structure]    (13.5 ,2.6) node{$\bullet$} -- (13.5 ,1) node{$\bullet$};
        \draw<3>[densely dotted, thick, exampleColor] (4.5  ,1.6) node{$\bullet$} -- (4.5  ,1)    node{$\bullet$};
        \draw<3>[densely dotted, thick, exampleColor] (9.5  ,1.6) node{$\bullet$} -- (9.5  ,1)  node{$\bullet$};

        \draw<4>[densely dotted, thick, structure]    (5.5  ,2.6) node{$\bullet$} -- (5.5  ,1)    node{$\bullet$};
        \draw<4>[densely dotted, thick, structure]    (11.5 ,2.6) node{$\bullet$} -- (11.5 ,1) node{$\bullet$};
        \draw<4>[densely dotted, thick, exampleColor] (3    ,1.6) node{$\bullet$} -- (3    ,1)    node{$\bullet$};
        \draw<4>[densely dotted, thick, exampleColor] (12.5 ,1.6) node{$\bullet$} -- (12.5  ,1)  node{$\bullet$};

        \draw<5>[densely dotted, thick, structure]    (5.5  ,2.6) node{$\bullet$} -- (5.5  ,1)    node{$\bullet$};
        \draw<5>[densely dotted, thick, structure]    (13.5 ,2.6) node{$\bullet$} -- (13.5 ,1) node{$\bullet$};
        \draw<5>[densely dotted, thick, exampleColor] (3    ,1.6) node{$\bullet$} -- (3    ,1)    node{$\bullet$};
        \draw<5>[densely dotted, thick, exampleColor] (9.5  ,1.6) node{$\bullet$} -- (9.5  ,1)  node{$\bullet$};

        \draw<6>[densely dotted, thick, structure]    (7.5  ,2.6) node{$\bullet$} -- (7.5  ,1)    node{$\bullet$};
        \draw<6>[densely dotted, thick, structure]    (13.5 ,2.6) node{$\bullet$} -- (13.5 ,1) node{$\bullet$};
        \draw<6>[densely dotted, thick, exampleColor] (3    ,1.6) node{$\bullet$} -- (3    ,1)    node{$\bullet$};
        \draw<6>[densely dotted, thick, exampleColor] (6.5  ,1.6) node{$\bullet$} -- (6.5  ,1)  node{$\bullet$};


      \end{tikzpicture}
    }
  \end{center}
  \pause
  \begin{alertblock}{Lin√©arisations acceptables}
    \begin{itemize}
    \item $\structure{T_1:increment();}~{\color{exampleColor}T_2:increment();}~\structure{T_1:get();}~{\color{exampleColor}T_2:get();}$
      \begin{itemize}
      \item Les deux lectures retournent 2
      \end{itemize}
      \pause
    \item $\structure{T_1:increment();}~{\color{exampleColor}T_2:increment();}~{\color{exampleColor}T_2:get();}~\structure{T_1:get();}$
      \begin{itemize}
      \item Les deux lectures retournent 2
      \end{itemize}
      \pause
    \item ${\color{exampleColor}T_2:increment();}~\structure{T_1:increment();}~\structure{T_1:get();}~{\color{exampleColor}T_2:get();}$
      \begin{itemize}
      \item Les deux lectures retournent 2
      \end{itemize}
      \pause
    \item ${\color{exampleColor}T_2:increment();}~\structure{T_1:increment();}~{\color{exampleColor}T_2:get();}~\structure{T_1:get();}$
      \begin{itemize}
      \item Les deux lectures retournent 2
      \end{itemize}
      \pause
    \item ${\color{exampleColor}T_2:increment();}~{\color{exampleColor}T_2:get();}~\structure{T_1:increment();}~\structure{T_1:get();}$
      \begin{itemize}
      \item $T_1$ lit $2$ et $T_2$ lit $1$
      \end{itemize}
    \end{itemize}
  \end{alertblock}
  %    \end{itemize}

\end{frame}

\endgroup
\endinput
