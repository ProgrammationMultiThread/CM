% SPDX-License-Identifier: CC-BY-SA-4.0
% Author: Matthieu Perrin
% Part: 
% Section: 
% Sub-section: 
% Frame: 

\begingroup

\begin{frame}[fragile]{Retour sur le calcul de $\pi$}
  \vfill

  \begin{lstlisting}[gobble=4]
    private static (*\Alert{int result = 0}*);

    public void pi(int nbThreads, int nbIterations) {
      threads = new Thread[n];
      for(int i = 0; i<nbThreads; i++) {
        (*\Structure{threads[i] = new Thread(() -> \{ }*)
          var random = ThreadLocalRandom.current();
          for(int i = 0; i<nbIterations; i++) {
            double x = random.nextDouble();
	    double y = random.nextDouble();
	    if(x*x + y*y < 1) (*\Alert{result++;}*)
          }
        (*\Structure{\});}*)
      }
      
      for(var t : threads) t.start();
      for(var t : threads) t.join();
      
      System.out.println((*\Alert{result}*));
    }
  \end{lstlisting}

  \vfill
  \begin{citing}
    \jitem \lstinline{cm3/Pi3_ThreadLocalRandom.java}
  \end{citing}
\end{frame}

\endgroup
\endinput
